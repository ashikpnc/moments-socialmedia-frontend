{"ast":null,"code":"var _jsxFileName = \"/home/ashik/Projects/Moments/frontend/src/components/chatComponents/contactBox/index.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useReducer, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { chatContactsReducer } from \"../../../functions/reducers\";\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport \"./style.css\";\nimport { getAllConversations, chatSearch } from \"../../../functions/chat\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet typingTimer;\nconst interval = 1000;\nexport default function ContactBox(_ref) {\n  _s();\n\n  let {\n    setSelectedChat\n  } = _ref;\n  let {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [chatSearchTerm, setChatSearchTerm] = useState(\"\");\n  const [{\n    loading,\n    error,\n    contacts\n  }, dispatch] = useReducer(chatContactsReducer, {\n    loading: false,\n    error: false,\n    contacts: []\n  });\n\n  const contactSearch = async () => {\n    dispatch({\n      type: \"CHAT_CONTACTS_REQUEST\"\n    });\n\n    if (chatSearchTerm) {\n      const returnObj = await chatSearch(chatSearchTerm, user.token);\n\n      if ((returnObj === null || returnObj === void 0 ? void 0 : returnObj.status) === \"ok\") {\n        dispatch({\n          type: \"CHAT_CONTACTS_SUCCESS\",\n          payload: returnObj.data\n        });\n      } else {\n        dispatch({\n          type: \"CHAT_CONTACTS_ERROR\"\n        });\n      }\n    } else {\n      conversationFetching();\n    }\n  };\n\n  const conversationFetching = async () => {\n    dispatch({\n      type: \"CHAT_CONTACTS_REQUEST\"\n    });\n    const {\n      data,\n      status\n    } = await getAllConversations(user.token);\n\n    if (status === \"ok\") {\n      dispatch({\n        type: \"CHAT_CONTACTS_SUCCESS\",\n        payload: data\n      });\n    } else {\n      dispatch({\n        type: \"CHAT_CONTACTS_ERROR\"\n      });\n    }\n  };\n\n  useEffect(() => {\n    conversationFetching();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contactBox\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setChatSearchTerm(e.target.value),\n            type: \"text\",\n            value: chatSearchTerm,\n            placeholder: \"Search buddies...\",\n            onKeyDown: () => {\n              clearTimeout(typingTimer);\n            },\n            onKeyUp: () => {\n              clearTimeout(typingTimer);\n              typingTimer = setTimeout(() => {\n                contactSearch();\n              }, interval);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat_body scrollbar\",\n        children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contacts_loading\",\n          children: /*#__PURE__*/_jsxDEV(BounceLoader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), !loading && (contacts === null || contacts === void 0 ? void 0 : contacts.map((contact, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contact\",\n          onClick: () => {\n            setSelectedChat({\n              id: contact._id,\n              first_name: con\n            });\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: contact.picture,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: `${contact.first_name} ${contact.last_name}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this)))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ContactBox, \"gH464CN8eg8u7XIZ5569eUlesig=\", false, function () {\n  return [useSelector];\n});\n\n_c = ContactBox;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContactBox\");","map":{"version":3,"sources":["/home/ashik/Projects/Moments/frontend/src/components/chatComponents/contactBox/index.js"],"names":["useEffect","useReducer","useState","useSelector","chatContactsReducer","BounceLoader","getAllConversations","chatSearch","typingTimer","interval","ContactBox","setSelectedChat","user","state","chatSearchTerm","setChatSearchTerm","loading","error","contacts","dispatch","contactSearch","type","returnObj","token","status","payload","data","conversationFetching","e","target","value","clearTimeout","setTimeout","map","contact","i","id","_id","first_name","con","picture","last_name"],"mappings":"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","sourcesContent":["import { useEffect, useReducer, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { chatContactsReducer } from \"../../../functions/reducers\";\nimport BounceLoader from \"react-spinners/BounceLoader\";\nimport \"./style.css\";\nimport { getAllConversations, chatSearch } from \"../../../functions/chat\";\nlet typingTimer;\nconst interval = 1000;\nexport default function ContactBox({ setSelectedChat }) {\n  let { user } = useSelector((state) => ({ ...state }));\n  const [chatSearchTerm, setChatSearchTerm] = useState(\"\");\n  const [{ loading, error, contacts }, dispatch] = useReducer(\n    chatContactsReducer,\n    {\n      loading: false,\n      error: false,\n      contacts: [],\n    }\n  );\n\n  const contactSearch = async () => {\n    dispatch({ type: \"CHAT_CONTACTS_REQUEST\" });\n    if (chatSearchTerm) {\n      const returnObj = await chatSearch(chatSearchTerm, user.token);\n      if (returnObj?.status === \"ok\") {\n        dispatch({ type: \"CHAT_CONTACTS_SUCCESS\", payload: returnObj.data });\n      } else {\n        dispatch({ type: \"CHAT_CONTACTS_ERROR\" });\n      }\n    } else {\n      conversationFetching();\n    }\n  };\n\n  const conversationFetching = async () => {\n    dispatch({ type: \"CHAT_CONTACTS_REQUEST\" });\n    const { data, status } = await getAllConversations(user.token);\n    if (status === \"ok\") {\n      dispatch({ type: \"CHAT_CONTACTS_SUCCESS\", payload: data });\n    } else {\n      dispatch({ type: \"CHAT_CONTACTS_ERROR\" });\n    }\n  };\n\n  useEffect(() => {\n    conversationFetching();\n  }, []);\n  return (\n    <div className=\"contactBox\">\n      <div className=\"wrapper\">\n        <div className=\"header\">\n          <div className=\"search\">\n            <input\n              onChange={(e) => setChatSearchTerm(e.target.value)}\n              type=\"text\"\n              value={chatSearchTerm}\n              placeholder=\"Search buddies...\"\n              onKeyDown={() => {\n                clearTimeout(typingTimer);\n              }}\n              onKeyUp={() => {\n                clearTimeout(typingTimer);\n                typingTimer = setTimeout(() => {\n                  contactSearch();\n                }, interval);\n              }}\n            />\n          </div>\n          {/* <h3>MOMENTS CHAT</h3> */}\n        </div>\n        <div className=\"chat_body scrollbar\">\n          {loading && (\n            <div className=\"contacts_loading\">\n              <BounceLoader />\n            </div>\n          )}\n          {!loading &&\n            contacts?.map((contact, i) => (\n              <div\n                key={i}\n                className=\"contact\"\n                onClick={() => {\n                  setSelectedChat({ id: contact._id, first_name: con });\n                }}\n              >\n                <img src={contact.picture} alt=\"\" />\n                <span>{`${contact.first_name} ${contact.last_name}`}</span>\n              </div>\n            ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}